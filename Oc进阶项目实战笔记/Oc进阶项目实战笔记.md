[TOC]

# 多线程

## 线程的定义

+ <font color=#FF0000 >线程是进程的基本执行单元</font>，一个进程的所有任务都在线程中执行
+ 进程要想执行任务，必须得有线程，进程至少要有一条线程
+ <font color=#FF0000 >程序启动会默认开启一条线程</font>，这条线程被称为主线程或UI线程

## 进程的定义

+ 进程是指在系统中正在运行的一个应用程序
+ 每个进程之间是独立的，每个进程均运行在其专用的且受保护的内存

## 进程与线程的关系

+ 地址空间：同一进程的线程共享本进程的地址空间，而进程之间则是独立的地址空间
+ 资源拥有：同一进程内的线程共享本进程的资源如内存、I/O、cpu等，但是进程之间的资源是独立的。
+ 执行过程：每个独立的进程有一个程序运行的入口、顺序执行序列和程序入口。但是线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制。
+ 线程是处理器调度的基本单位，但是进程不是。

## 多线程的意义

+ 优点

  + 能适当提高程序的执行效率
  + 能适当提高资源的利用率（CPU，内存）
  + 线程上的任务执行完成后，线程会自动销毁

+ 缺点

  + 开启线程需要占用一定的内存空间（默认情况下，每一个线程都占 512 KB）[^表现]

  + 如果开启大量的线程，会占用大量的内存空间，降低程序的性能

  + 线程越多，CPU 在调用线程上的开销就越大

  + 程序设计更加复杂，比如线程间的通信、多线程的数据共享

    [^表现]:主线程开一个线程里输出一个打印，再在主线程输出一个打印，先调用的是后面主线程的这个打印，因为开线程有一定的耗时

## 多线程的原理

